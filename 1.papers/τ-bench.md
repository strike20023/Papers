---
link: https://arxiv.org/pdf/2406.12045
github: https://github.com/sierra-research/tau-bench
note: 提出τ-bench，用真实领域的工具与政策约束模拟用户-代理对话；以数据库最终状态对比目标状态评估，并引入pass^k一致性指标，显示SOTA函数调用代理仍低于50%任务成功率。
title: "τ-bench: A Benchmark for Tool-Agent-User Interaction in Real-World Domains"
title_cn: τ-bench：真实场景中工具-代理-用户交互的基准
tags:
  - paper
icon: LiNewspaper
---

## 摘要
现有多模态/语言代理的评测很少同时考察两点：（1）与人类用户的动态交互能力，以及（2）严格遵循领域规则与政策的可靠性。τ-bench提出一个模拟真实业务的评测框架：由“用户”（LLM模拟）与“语言代理”（具备领域API工具与政策指南）开展多轮任务对话，最终以数据库状态与标注的目标状态一致性作为成败标准。同时提出新指标pass^k，用于衡量代理在多次独立尝试中的稳定性与可重复性。

## Keys
我们分三个阶段构建了τ-bench，包括手动设计模式和API，LM辅助生成数据条目，以及手动生成和验证用户模拟器的场景。
我们的评估方案将每个场景结束时数据库的状态与预期真实状态进行比较。
### 评估
$r = r_{\text{action}} \times r_{\text{output}} \in \{0,1\}$
数据库状态+agent回答
可能存在评估都对但是violates the policy的情况

### 构建方式
1. 手动设计数据库模式、API和策略
2. 使用LMs自动生成数据
3. 基于agent手动对任务标注和验证，确保任务无歧义

### 数据统计

| 项目          | τ-retail（零售） | τ-airline（航空） |
| ----------- | ------------ | ------------- |
| **用户规模**    | 500人         | 500人          |
| **资源规模**    | 50商品，1,000订单 | 300航班，2,000预订 |
| **API写操作**  | 7次           | 6次            |
| **API非写操作** | 8次           | 7次            |
| **任务数量**    | 115个         | 50个           |

- **零售系统**：任务多、读取操作多，强调商品和订单的高频查询与管理。
- **航空系统**：任务量少，写操作与读取操作比例接近。
### pass^k
$$
\text{pass}^{\wedge}\text{k} = \mathbb{E}_{\text{task}}\left[\binom{c}{k} / \binom{n}{k}\right], \quad
\text{pass}@k = 1 - \mathbb{E}_{\text{task}}\left[\binom{n - c}{k} / \binom{n}{k}\right].
$$
- pass^k：“选 k 个全对” 的平均概率
- pass@k：“选 k 个至少 1 个对” 的平均概率
这个评估指标可以捕获agent在处理与相同底层语义的对话中的变化时的可靠性，同时遵守领域政策和规则。
### 结果分析
- 不正确的调用工具的参数：在复杂数据库和用户意图方面需要提高常识和数值推理能力
- 错误的决策：未充分利用政策文件
- 组合任务只完成部分：上下文与记忆能力，忽略了隐式动作